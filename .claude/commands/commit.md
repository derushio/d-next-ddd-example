# Smart Commit Command

> **重要**: `pnpm check`、`pnpm type-check`、`pnpm lint`等の品質チェックコマンドは**絶対に手動実行しないでください**。これらはpre-commitフックで自動実行されます。

以下の手順で、プロフェッショナルなgit commitを実行してください。

## 1. 変更内容の取得と分析

まず、現在のdiffを取得し、以下の観点で分析してください：

```bash
git diff --staged
git diff
git status
```

## 2. ベストプラクティス観点でのレビュー

分析した変更に対して、以下のエンジニアリングベストプラクティスの観点でレビューしてください：

### コード品質

- [ ] 命名規則は適切か（変数名、関数名、クラス名）
- [ ] 単一責任の原則は守られているか
- [ ] 重複コードはないか（DRY原則）
- [ ] 不要なコメント、デバッグコード、console.logは残っていないか

### セキュリティ

- [ ] 機密情報（APIキー、パスワード等）がハードコードされていないか
- [ ] SQLインジェクション、XSS等の脆弱性がないか
- [ ] 入力値のバリデーションは適切か

### パフォーマンス

- [ ] 不要なループや再レンダリングはないか
- [ ] メモリリークの可能性はないか

### 保守性

- [ ] 型定義は適切か（TypeScript）
- [ ] エラーハンドリングは適切か
- [ ] テストの追加・更新は必要か

## 3. 問題点の報告と対応

上記レビューで問題が見つかった場合：

1. **問題点を具体的に報告**してください
2. ユーザーに**修正を提案**してください
3. ユーザーの承認を得てから修正を行ってください

## 4. コミットメッセージの作成

問題がない場合、または修正完了後、以下のConventional Commits形式でコミットメッセージを作成してください：

### フォーマット

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Type一覧

- `feat`: 新機能追加
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの意味に影響しない変更（空白、フォーマット等）
- `refactor`: バグ修正でも機能追加でもないコード変更
- `perf`: パフォーマンス改善
- `test`: テストの追加・修正
- `chore`: ビルドプロセスやツールの変更
- `ci`: CI設定の変更

### 良いコミットメッセージの例

```
feat(auth): ログイン機能にOAuth2.0認証を追加

- Google OAuth2.0プロバイダーを実装
- セッション管理にJWTを採用
- リフレッシュトークンのローテーション機能を追加

Closes #123
```

## 5. コミットの実行

1. 必要に応じて変更を適切な単位でステージング
2. 論理的に分離可能な変更は**複数のコミットに分割**
3. 各コミットは**単一の目的**を持つようにする

## 6. 最終確認

コミット後、`git log --oneline -3` で直近のコミットを確認し、問題なければ完了を報告してください。
